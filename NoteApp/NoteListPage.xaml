<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="NoteApp.NoteListPage"
             xmlns:models="clr-namespace:NoteApp.Models"
             xmlns:converters="clr-namespace:NoteApp.Converters"
             Title="My Notes">

    <ContentPage.Resources>
        <ResourceDictionary>
            <converters:TitleOrTextConverter x:Key="TitleOrTextConverter" />
        </ResourceDictionary>
    </ContentPage.Resources>

    <VerticalStackLayout>
        <Button x:Name="AddNoteButton"
                Text="Add New Note"
                Clicked="OnAddNoteClicked"
                Margin="10" />

        <CollectionView x:Name="NotesCollectionView">
            <CollectionView.ItemTemplate>
                <DataTemplate x:DataType="models:Note">
                        <Grid>
                            <Grid.GestureRecognizers>
                                <TapGestureRecognizer 
                                    Tapped="OnNoteTapped"
                                    BindingContext="{Binding .}" />
                            </Grid.GestureRecognizers>
                            
                            <VisualStateManager.VisualStateGroups>
                                </VisualStateManager.VisualStateGroups>

                            <Frame Padding="15" Margin="10,5" CornerRadius="5" 
                                InputTransparent="True"
                                HasShadow="False"
                                BorderColor="{AppThemeBinding Light=#E0E0E0, Dark=#404040}"
                                BackgroundColor="{AppThemeBinding Light={StaticResource FrameBackgroundLight}, Dark={StaticResource FrameBackgroundDark}}">
                                <VerticalStackLayout>
                                    
                                    <Label Text="{Binding Title}" 
                                        FontSize="Medium" 
                                        FontAttributes="Bold" 
                                        TextColor="{AppThemeBinding Light={StaticResource PrimaryTextLight}, Dark={StaticResource PrimaryTextDark}}" />
                                    
                                    <Label Text="{Binding Date, StringFormat='{0:d MMMM yyyy}'}" 
                                        FontSize="Small" 
                                        TextColor="{AppThemeBinding Light={StaticResource SecondaryTextLight}, Dark={StaticResource SecondaryTextDark}}" />
                                
                                </VerticalStackLayout>
                            </Frame>
                        </Grid>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>
    </VerticalStackLayout>

</ContentPage>